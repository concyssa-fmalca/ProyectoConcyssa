@model List<string>
@{
    ViewBag.Title = "Listado";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    body {
        font-family: Arial;
    }

    .huser-20 {
        height: 20px;
    }

    #global {
        height: 500px;
        border: 1px solid #ddd;
        background: #f1f1f1;
        overflow-y: scroll;
        margin-left: 25px;
    }

    #mensajes {
        height: auto;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #bcecf1;
        background-color: #effafc;
    }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 8px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #baecf5;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #baecf5;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }
</style>

<div class="container-fluid" style="height:93%;">
    <div class="panel">
        <div class="container-fluid">
            <div class="topbar-left col-xs-6">
                <h3>Atención de Solicitud de Despacho</h3>
            </div>
        </div>
        <div class="container-fluid">
            <div class="col-xs-6">
                <div class="topbar-left col-xs-6">
@*                    <h4 style="font-size:1.2em;">Total de Registros: <span id="spnTotalRegistros"></span></h4>*@
                    <br />
                </div>
            </div>
            <div class="col-xs-6 right">
                <a id="reporteRPT" style="display:none" download="" href="data:application/octet-stream;base64,R0lGODdhAQABAPAAAP8AAAAAACwAAAAAAQABAAACAkQBADs=">download image</a>
@*                <button class="btn btn-sm  btn-primary pull-right plu" data-target="modal1" onclick="ModalNuevo()" style="margin-left:10px;">Nuevo</button>
*@                @*<button class="btn btn-sm  btn-success pull-right plu" id="btnPdf" style="margin-left:10px;">Descargar PDF</button>
                <button class="btn btn-sm btn-info pull-right plu" id="btnExcel" style="margin-left:10px;">Descargar Excel</button>*@
            </div>
             <div class="col-xs-12 right">
                 <label class="col-sm-2" for="cboObraFiltro">Base</label>
                 <div class="col-sm-3">
                    <select class="form-control" id="cboObraFiltro" onchange="ObtenerObraxIdBase()"></select>
                 </div>
            </div>
               <div class="col-xs-12 right">
                 <label class="col-sm-2" for="IdObra">Obra</label>
                 <div class="col-sm-3">
                    <select class="form-control" id="IdObra"></select>
                 </div>
            </div>
            <div class="col-xs-12 right">
                <label class="col-sm-2" for="txtFechaInicio">Fecha Inicio</label>
                <div class="col-sm-3">
                    <input type="date" class="form-control col-sm-3" id="txtFechaInicio" />
                </div>

            </div>
            <div class="col-xs-12 right">             
                <label class="col-sm-2" for="txtFechaFin">Fecha Fin</label>
                <div class="col-sm-3">
                  <input type="date" class="form-control col-sm-3"  id="txtFechaFin" />    
                </div>
            </div>
            <div class="col-xs-12 right">
                <label class="col-sm-2" for="EstadoFiltro">Estado</label>
                <div class="col-sm-3">
                    <select class="form-control" id="EstadoFiltro" onchange="ConsultaServidorLimpio()">
                        <option value="0">Pendiente de Entrega</option>
                        <option value="1">Entregado Parcialmente</option>
                        <option value="2">Cerrado Automatico</option>
                        <option value="3">Cerrado Manual</option>
                    </select>
                </div>
            </div>
             <div class="col-xs-12 right">
                <label class="col-sm-2" for="cboSeries">N° Solicitud</label>
                <div class="col-sm-3">
                    <select class="form-control" id="cboSeries" onchange="ConsultaServidor()">
                        
                    </select>
                </div>
                <button class="btn btn-primary" style="margin-top:3px" onclick="ConsultaServidorLimpio()">Buscar</button>
                <button class="btn btn-primary" style="margin-top:3px" onclick="ModalReporte()">Ver Pend. Aprob.</button>
            </div>
        </div>
    </div>
    <div class="panel">
        <div class="container-fluid" id="divPaginacion">
            
                <ul class="pagination">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1">Previous</a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                    </li>
                </ul>
           
        </div>
    </div>
    <div class="panel">
        <div class="container-fluid" id="SolicitudesCard">

          @*  <div class="panel" style="background-color:aliceblue">
                <div class="row">
                    <label class="col-md-2" style="max-width:130px">Serie y Número:</label>
                    <p class="col-md-1">"SD-9"</p>
                    <label class="col-md-2" style="max-width:70px">Fecha:</label>
                    <p class="col-md-1">"2023-07-10"</p>
                    <label for="cboAlmacen" class="col-md-1">Almacen:</label>
                    <div class="col-md-4" style="margin-top:-3px">
                        <select id="cboAlmacen" class="form-control"></select>
                    </div>
                    <button class="btn btn-primary" style="margin-top:0px">Agregar Artículo</button>
                </div>
                <div class="row">
                    <label class="col-md-2" style="max-width:130px">Centro de Costo:</label>
                    <p class="col-md-5">"RED DE AGUA POTABLE Y CONEXIONES DE EDIFICIO MULTI"</p>
                    <label for="cboResponsable" class="col-md-2" style="max-width:130px">Entregado A:</label>
                    <div class="col-md-4" style="margin-top:-3px">
                        <select id="cboResponsable" class="form-control"></select>
                    </div>                 
                </div>
                <div class="row">
                    <table id="table_id" class="table" style="width:100%">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Articulo</th>
                                <th style="max-width:60px">Cantidad Solicitada</th>
                                <th style="max-width:60px">Cantidad Atendida</th>
                                <th style="max-width:60px">Cantidad A Atender</th>
                                <th style="max-width:60px">Stock</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_Solicitudes"></tbody>
                    </table>
                </div>
            </div>
            <br />*@

        </div>
    </div>
    <!-- Modal -->
    <div id="modal-form" class="popup-sm allcp-form mfp-with-anim mfp-hide">
        <div class="panel">
            <div class="panel-heading">
                <h5 id='lblTituloModal'></h5>
            </div>
            <div class="panel-body ">
                <div class='col s12 m12 '>
                    <div class='container-fluid'>
                        <input id='txtId' name="txtId" type='hidden' class="form-control input-sm">
                        <div class='form-horizontal'>
                            <div class="row" style="display:none">
                                <div class="col-md-10">
                                    <input class="form-control" id="txtIdFila" type="number" />
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-2">Articulo</label>
                                <div class="col-md-10">
                                    <Select id="cboAgregarArticulo" class="form-control" onchange="obtenerStockUnitario()"></Select>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-2">Stock</label>
                                <div class="col-md-10">
                                    <input id="StockNuevoU" class="form-control" type="number" disabled readonly/>
                                </div>
                            </div>
                            <div class="row" style="display:none">
                                <label class="col-md-2">Nombre</label>
                                <div class="col-md-10">
                                    <input id="NombreCrear" class="form-control" type="text" disabled readonly />
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-2">Cantidad</label>
                                <div class="col-md-10">
                                    <input id="cantidadNuevo" class="form-control" type="number" />
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="panel-footer text-right">
                <div class="row">
                    <button type="button" class="btn btn-danger pull-right" onclick="agregarItemDetalle()" data-dismiss="modal">Agregar</button>
                    <button type="button" class="btn btn-danger pull-right" style="background-color:orange;" data-dismiss="modal" onclick="closePopup()">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal-reporte" class="popup-sm allcp-form mfp-with-anim mfp-hide">
        <div class="panel">
            <div class="panel-heading">
                <h5 id='lblTituloModal'></h5>
            </div>
            <div class="panel-body ">
                <div class='col s12 m12 '>
                    <div class='container-fluid'>
                        <div class='form-horizontal'>
                            <div class="row" style="display:none">
                                <div class="col-md-10">
                                    <input class="form-control" id="txtIdFila" type="number" />
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-2">Obra</label>
                                <div class="col-md-10">
                                    <Select id="cboObraReporte" class="form-control"></Select>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-sm-2" for="txtFechaInicio">Fecha Inicio</label>
                                <div class="col-sm-4">
                                    <input type="date" class="form-control col-sm-3" id="txtFechaInicioRpt" />
                                </div>
                                <label class="col-sm-2" for="txtFechaFin">Fecha Fin</label>
                                <div class="col-sm-4">
                                    <input type="date" class="form-control col-sm-3" id="txtFechaFinRpt" />
                                </div>
                            </div>                          
                            <div class="row">
                                <button class="btn btn-primary" onclick="ObtenerReporte()">Ver PDF</button>
                                <button class="btn btn-primary" onclick="ImportarExcel()" style="background-color:green">Ver Excel</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="panel-footer text-right">
                <div class="row">
                    <button type="button" class="btn btn-danger pull-right" style="background-color:orange;" data-dismiss="modal" onclick="closePopup()">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal-guia" class="popup-lg allcp-form mfp-with-anim mfp-hide">
        <div class="panel">
            <div class="panel-heading">
                <h5 id='lblTituloModal'></h5>
            </div>
            <div class="panel-body ">
                <div class='col s12 m12 '>
                    <div class='container-fluid'>
                        <div class='form-horizontal'>
                            <div class="row" style="display:none" >
                                <div class="col-md-10">
                                    <input class="form-control" id="txtIdSolicitud" type="text" />
                                    <input class="form-control" id="txtNum" type="text" />
                                    <input class="form-control" id="txtnumserie" type="text" />
                                    <input class="form-control" id="txtcuadrilla" type="text" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <label>Tipo Documento</label>
                                    <Select id='IdTipoDocumentoRef' class='form-control' onchange="OcultarCampos()"></select>
                                </div>
                                <div class="col-md-3">
                                    <label>Serie</label>
                                    <Select id='cboSerieExtorno' class='form-control'></select>
                                </div>
                                 <div class="col-md-3">
                                    <label>Serie</label>
                                    <input id='FechDocExtorno' type='date' class='form-control'/>
                                </div>
                                <div class="col-md-3">
                                    <label>Serie</label>
                                   <input id='FechContExtorno' type='date' disabled class='form-control'/>
                                </div>
                            </div>
                            <div class="ocultate">
                                 <div class="row">
                                <div class="col-md-3">
                                    <label>Tipo Transporte</label>
                                    <select id="IdTipoTransporte" class="form-control input-sm" tabindex="21"><option value="0">SELECCIONE </option><option selected value="02">PRIVADO</option><option value="01">PUBLICO</option></select>
                                </div>
                                <div class="col-md-3">
                                    <label>DESTINATARIO</label>
                                    <select id="IdDestinatario" class="form-control input-sm" tabindex="0"><option value="0">SELECCIONE </option></select>
                                </div>
                                 <div class="col-md-3">
                                    <label>MOTIVO TRASLADO</label>
                                    <select id="IdMotivoTraslado" class="form-control input-sm" tabindex="0"><option value="0">SELECCIONE </option></select>
                                </div>
                                <div class="col-md-3">
                                    <label>RUC TRANSPORTISTA</label>
                                    <select id="IdTransportista" class="form-control input-sm" tabindex="0"><option value="0">SELECCIONE </option></select>
                                </div>
                            </div>

                                <div class="row">
                                <div class="col-md-3">
                                    <label>PLACA VEHICULO</label>
                                   <select id="PlacaVehiculo" class="form-control input-sm" tabindex="0" onchange="BuscarVehiculoxPlaca()" ><option value="0">SELECCIONE </option></select>
                                </div>
                                <div class="col-md-3">
                                    <label>MARCA VEHICULO</label>
                                    <input id="MarcaVehiculo" type="text" class="form-control " tabindex="16">
                                </div>
                                 <div class="col-md-3">
                                    <label>DNI CONDUCTOR</label>
                                    <div class="row">
                                                <div class="col-md-10">
                                                    <input id="NumIdentidadConductor" type="text" class="form-control " tabindex="16">
                                                </div>
                                                <div class="col-md-2">
                                                    <button class="btn btn-info btn-xs fa fa-search" onclick="BuscarDNI()"></button>
                                                </div>

                                      </div>
                                </div>
                                <div class="col-md-3">
                                    <label>NOMBRES CONDUCTOR</label>
                                     <input id="NombreConductor" type="text" class="form-control " tabindex="17">
                                </div>
                            </div>

                              <div class="row">
                                <div class="col-md-3">
                                    <label>APELLIDOS CONDUCTOR</label>
                                  <input id="ApellidoConductor" type="text" class="form-control " tabindex="17">
                                </div>
                                <div class="col-md-3">
                                    <label>LICENCIA CONDUCTOR</label>
                                     <input id="LicenciaConductor" type="text" class="form-control " tabindex="17">
                                </div>
                                 <div class="col-md-3">
                                    <label>Peso Bruto</label>
                                    <input id="Peso" type="text" class="form-control " tabindex="18">
                                </div>
                                <div class="col-md-3">
                                    <label>Bulto</label>
                                     <input id="Bulto" type="text" class="form-control " tabindex="20">
                                </div>
                            </div>
                           
                            
                              <div class="row">
                                <div class="col-md-3">
                                    <label>SGI</label>
                                   <div class="row ocultate">
                                         <div class="container-fluid">
                                                <div class="col-sm-10">
                                                    <input id="txtSGI" type="text" class="form-control " tabindex="17">
                                                </div>
                                                <div class="col-sm-2">
                                                    <button class="btn btn-info btn-xs fa fa-search" onclick="BuscarSGI()"></button>
                                                </div>
                                         </div>

                                     </div>
                                </div>
                                <div class="col-md-3">
                                    <label>Distrito de llegada</label>
                                     <select id="DistritoLlegada" class="form-control " tabindex="18"></select>
                                </div>
                                 <div class="col-md-3">
                                    <label>Direccion</label>
                                  <input id="Direccion" type="text" class="form-control " tabindex="18">
                                </div>
                        
                            </div>
                           
                                 
                            </div>
                            



                           
                        </div>

                    </div>
                </div>
            </div>
            <div class="panel-footer text-right">
                <div class="row">
                    <button type="button" class="btn btn-danger pull-right" style="background-color:orange;" data-dismiss="modal" onclick="closePopup()">Cerrar</button>
                    <button class="btn btn-primary" onclick="GuardarSalida()">Generar Salida</button>
                </div>
            </div>
        </div>
    </div>
</div>
@{
    Random rnd = new Random();
}

<script src="~/Scripts/AtencionDespacho/Listado.js?v=@rnd.Next(1, 1000 + 1)"></script>
<script src="~/Scripts/General.js"></script>
<script src="~/js/pdf/jspdf.min.js"></script>
<script src="~/js/pdf/faker.min.js"></script>
<script src="~/js/pdf/jspdf.plugin.autotable.src.js"></script>


